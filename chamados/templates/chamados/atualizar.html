{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block titulo %} Atualizar Chamado {% endblock %}

{% block conteudo %}
<div class="row">
        <div class="col-12">
            <p class="lead"> Atualizar chamado de <code>{{ ticket.nome }}</code></p>
            <hr>

<form method="POST" enctype="multipart/form-data" action="{% url 'chamados:atualizar_chamado' ticket.id %}">
{% csrf_token %}
<div class="form-row">
  <div class="form-group  col-md-3">
    <label for="unidade">Unidade : </label>
    <input type="text" class="form-control" id="unidade" name="unidade" value="{{ ticket.funcionario.unidade }}" readonly>
  </div>
   <div class="form-group col-md-2">
    <label for="re">RE : </label>
    <input type="number" class="form-control" id="funcionario" name="funcionario" maxlength="5" minlength="4"
      value="{{ ticket.funcionario.re_funcionario }}" readonly>
  </div>
      <div class="form-group col-md-4">
    <label for="re">Nome do Funcionário : </label>
    <input type="text" class="form-control" id="nome" name="nome" placeholder="Digite um RE válido."
      value="{{ ticket.funcionario.nome }}" readonly>
  </div>
    <div class="form-group col-md-3">
    <label for="categoria">Categoria :</label>
    <input type="text" class="form-control" name="categoria" id=categoria value="{{ ticket.categoria }}" readonly>
    </select>
  </div>
   <div class="form-group col-md-4">
    <label for="ramal">Ramal : </label>
    <input type="number" class="form-control" id="ramal" name="ramal" value="{{ ticket.funcionario.ramal }}" readonly>
  </div>
    <div class="form-group col-md-8">
    <label for="email">Email Funcionário : </label>
    <input type="email" class="form-control" id="email" name="email" value="{{ ticket.funcionario.email }}" readonly>
  </div>
    <div class="form-group col-md-12">
    <label for="texto">Descrição do Chamado : </label>
    <textarea class="form-control" id="texto-atualizar" name="texto" rows="5" col="15"
      readonly>{{ ticket.texto }}</textarea>
  </div>
{% if ticket.finalizado == False %}
    <div class="form-group col-md-12">
    <label for="resposta">Resposta : </label>
    <textarea class="form-control" id="texto-azul" name="resposta" rows="5" col="15" value="{{ ticket.resposta }}"
      required>{{ ticket.resposta }}</textarea>
  </div>

  {% if ticket.upload_arquivo %}
      <div class="form-group col-md-5">
          <label><strong>Arquivo : </strong></label>
          <p class="mt-2"><a href="{{ ticket.upload_arquivo.url }}">{{ ticket.upload_arquivo }}</a></p>
      </div>
  {% else %}
  {% endif %}
  <div class="form-group col-md-3">
    <label for="finalizado"><small><strong>Chamado foi finalizado ?</strong></small> </label>
    <select class="form-control" id="finalizado" name="finalizado" value="{{ ticket.finalizado }}" required>
      <option id="finalizado" value="False">Não</option>
      <option id="finalizado" value="True">Sim</option>
    </select>
  </div>

<div class="form-group  col-md-9 mt-4 p-2">
<a type="button" href="{% url 'chamados:listar' %}" class="btn btn-warning w-25">&nbsp;&nbsp;&nbsp; Voltar &nbsp;&nbsp;&nbsp;</a>
<button type="submit" class="btn btn-success w-50">Atualizar o Chamado</button>
</div>

{% else %}
<div class="form-group col-md-12">
  <label for="resposta">Resposta : </label>
  <textarea class="form-control" id="texto-azul" name="resposta" rows="5" col="15"
    readonly>{{ ticket.resposta }}</textarea>
</div>

<div class="form-group  col-md-12 mt-4 p-2">
<a type="button" href="{% url 'chamados:listar' %}" class="btn btn-warning pr-5 pl-5 w-100">&nbsp;&nbsp;&nbsp; Voltar &nbsp;&nbsp;&nbsp;</a>
</div>

{% endif %}

</div>
</div>
</div> 

{% endblock %}